apply plugin: 'groovy'

defaultTasks 'build'

repositories {
    mavenCentral()
}

dependencies {
	// Build and Runtime Dependencies
    compile localGroovy()
    compile 'com.google.api-client:google-api-client:1.22.0'
    compile 'com.google.oauth-client:google-oauth-client-jetty:1.22.0'
    compile 'com.google.apis:google-api-services-sheets:v4-rev11-1.22.0'
    compile 'org.glassfish.jersey.archetypes:jersey-quickstart-grizzly2:2.23.1'
    compile localGroovy()
	
	// Test Dependencies
	testCompile 'junit:junit:4.11'
	testCompile 'org.hamcrest:hamcrest-core:1.3'
}

configurations {
    // Remove the groovy-all jar from runtime dependencies
    runtime.exclude module: 'groovy-all'
}

sourceSets {
    main {
        groovy {
            srcDirs = ['src/main/groovy']
        }
		resources {
			srcDirs = [ 'src/main/resources']
		}
    }
}

task copyDependencies(type: Copy) {
    from configurations.runtime
    into 'lib'
}

task copyCredentials(type: Copy) {
    from sourceSets.main.resources.srcDirs
    into 'resources'
}

task build(type:Zip) {
    from(sourceSets.main.groovy.srcDirs)
    into('lib') {
        from copyDependencies
    }

    into('resources') {
        from sourceSets.main.resources.srcDirs
    }
}